function Addperformance(){this.reserveSaleTotal="",this.reserveHouse="",this.saleHouseTotal="",this.SaleHouse="",this.paymentHouseTotal="",this.paymentHouse="--",this.commissionTotal="",this.commissionHouse="",this.backReserveMoney="",this.backReserveHouse="",this.backMoney="",this.backHouse="",this.reportCustomer="",this.lfScale="--",this.lfSut="",this.addAgency="",this.newIncreased="--",this.customerLook="",this.agencyCustomerLook="",this.totalSum="",this.totalSut="",Object.defineProperty(this,"paymentHouse",{value:"-- ",writable:!1}),Object.defineProperty(this,"newIncreased",{value:"-- ",writable:!1}),Object.defineProperty(this,"lfScale",{get:function(){var e=this.customerLook+this.agencyCustomerLook,o=/^[0-9]*$/;return o.test(this.reportCustomer)&&o.test(e)&&"0"!==e&&""!=e&&""!=this.reportCustomer?lfScale=(this.reportCustomer/e).toFixed(2)+":1":lfScale="--"},set:function(e){lfScale=e}}),this.config={reserveSaleTotal:document.querySelector("#reserveSaleTotal"),reserveHouse:document.querySelector("#reserveHouse"),saleHouseTotal:document.querySelector("#saleHouseTotal"),SaleHouse:document.querySelector("#SaleHouse"),paymentHouseTotal:document.querySelector("#paymentHouseTotal"),paymentHouse:document.querySelector("#paymentHouse"),commissionTotal:document.querySelector("#commissionTotal"),commissionHouse:document.querySelector("#commissionHouse"),backReserveMoney:document.querySelector("#backReserveMoney"),backReserveHouse:document.querySelector("#backReserveHouse"),backMoney:document.querySelector("#backMoney"),backHouse:document.querySelector("#backHouse"),reportCustomer:document.querySelector("#reportCustomer"),lfScale:document.querySelector("#lfScale"),lfSut:document.querySelector("#lfSut"),addAgency:document.querySelector("#addAgency"),newIncreased:document.querySelector("#newIncreased"),totalSum:document.querySelector("#totalSum"),totalSut:document.querySelector("#totalSut")}}Addperformance.prototype={constructor:Addperformance,throttle:function(e,o){clearTimeout(e.tId),e.tId=setTimeout(function(){e.call(o)},500)},nullData:function(){addperformance.reserveSaleTotal="",addperformance.reserveHouse="",addperformance.saleHouseTotal="",addperformance.SaleHouse="",addperformance.paymentHouseTotal="",addperformance.commissionTotal="",addperformance.commissionHouse="",addperformance.backReserveMoney="",addperformance.backReserveHouse="",addperformance.backMoney="",addperformance.backHouse="",addperformance.reportCustomer="",addperformance.addAgency="",addperformance.newIncreased="",addperformance.customerLook="",addperformance.agencyCustomerLook=""},totalPerfor:function(){this.config.totalSum.innerHTML=this.totalSum,this.config.totalSut.innerHTML=this.totalSut},bindDom:function(){this.config.reserveSaleTotal.innerHTML=this.reserveSaleTotal,this.config.reserveHouse.innerHTML=this.reserveHouse,this.config.saleHouseTotal.innerHTML=this.saleHouseTotal,this.config.SaleHouse.innerHTML=this.SaleHouse,this.config.paymentHouseTotal.innerHTML=this.paymentHouseTotal,this.config.paymentHouse.innerHTML=this.paymentHouse,this.config.commissionTotal.innerHTML=this.commissionTotal,this.config.commissionHouse.innerHTML=this.commissionHouse,this.config.backReserveMoney.innerHTML=this.backReserveMoney,this.config.backMoney.innerHTML=this.backMoney,this.config.backHouse.innerHTML=this.backHouse,this.config.reportCustomer.innerHTML=this.reportCustomer,this.config.lfScale.innerHTML=this.lfScale,this.config.lfSut.innerHTML=this.lfSut,this.config.addAgency.innerHTML=this.addAgency,this.config.newIncreased.innerHTML=this.newIncreased},getData:function(e,o,t,a,r){if(null==e||"null"==e)return $my.messageInfo.html("楼盘参数丢失").fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/overview/addperformanceApp.json",data:{PropertyID:e,timeselete:o,firsttime:t,endtime:a},success:function(e){if("{}"===JSON.stringify(e))return addperformance.nullData(),addperformance.bindDom(),addperformance.totalPerfor(),void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");if(0===e.Addperformance.length)return addperformance.nullData(),addperformance.bindDom(),addperformance.totalPerfor(),$my.messageInfo.html("数据为空").fadeIn("fast").delay("1000").fadeOut("slow"),!1;var o=e.Addperformance[0];void 0===r?(addperformance.reserveSaleTotal=(o.ReserveSaleTotal/1e4).toFixed(4),addperformance.reserveHouse=o.ReserveHouse,addperformance.saleHouseTotal=(o.SaleHouseTotal/1e4).toFixed(4),addperformance.SaleHouse=o.SaleHouse,addperformance.paymentHouseTotal=(o.PaymentHouseTotal/1e4).toFixed(4),addperformance.commissionTotal=(o.CommissionTotal/1e4).toFixed(4),addperformance.commissionHouse=o.CommissionHouse,addperformance.backReserveMoney=(o.BackReserveMoney/1e4).toFixed(4),addperformance.backReserveHouse=o.BackReserveHouse,addperformance.backMoney=(o.BackMoney/1e4).toFixed(4),addperformance.backHouse=o.BackHouse,addperformance.reportCustomer=o.ReportCustomer,addperformance.lfSut=o.CustomerLook+o.AgencyCustomerLook,addperformance.addAgency=o.AddAgency,addperformance.newIncreased=o.newIncreased,addperformance.customerLook=o.CustomerLook,addperformance.agencyCustomerLook=o.AgencyCustomerLook,addperformance.bindDom()):(addperformance.totalSum=parseFloat(o.ReserveSaleTotal.toFixed(0)).toLocaleString(),addperformance.totalSut=o.ReserveHouse,addperformance.totalPerfor())}})},sdtSub:function(){var e=document.querySelector("#dataScreenFirsttime"),o=document.querySelector("#dataScreenEndtime"),t=e.value,a=o.value;return t=t.split("/").join(""),a=a.split("/").join(""),""==t&&""==a?($my.messageInfo.html("日期选择不能为空").fadeIn("fast").delay("1000").fadeOut("slow"),!1):""==t?($my.messageInfo.html("开始日期不能为空").fadeIn("fast").delay("1000").fadeOut("slow"),!1):""==a?($my.messageInfo.html("结束日期不能为空").fadeIn("fast").delay("1000").fadeOut("slow"),!1):a<t?($my.messageInfo.html("结束日期不能小于开始日期").fadeIn("fast").delay("1000").fadeOut("slow"),!1):(addperformance.getData($my.propertyid,5,t,a),void $("#myModal").modal("hide"))},buffer:function(){var e=$my.timeList.querySelector(".optionListActive").dataset.index;if(sessionStorage.setItem("globaltimeSelect",JSON.stringify(e)),"0"!==e&&"5"!==e)addperformance.getData($my.propertyid,e,1,1);else{if("0"===e&&"5"!==e)return void $my.messageInfo.html("今日暂停查询").fadeIn("fast").delay("1000").fadeOut("slow");if("5"===e&&"0"!==e){var o=document.getElementById("confirmBtnID");$("#myModal").modal("show");var t=new Date,a=new Date(t.getFullYear()-10,t.getMonth(),t.getDate()),r=new Date(t.getFullYear()+100,t.getMonth(),t.getDate());$(".data").mobiscroll().date({theme:"ios",lang:"zh",display:"bottom",min:a,max:r}),o.addEventListener("touchend",function(e){e.preventDefault(),e.stopPropagation(),addperformance.throttle(addperformance.sdtSub,this)},!1)}}},baobeiSearch:function(){var e=document.querySelector("#searchBox"),o=e.value;if(1!=/^[0-9]{4}$/.test(o))return void $my.messageInfo.html("号码为四位非负整数").fadeIn("fast").delay("1000").fadeOut("slow");window.location.href="report_search_list.html?lastName="+o}};var addperformance=new Addperformance;$(function(){window.$my={messageInfo:$(".messageInfo"),timeList:document.getElementById("timeList"),propertyid:sessionStorage.getItem("propertyID")},$.ajaxSetup({type:"POST",dataType:"json",error:function(){$my.messageInfo.html("服务错误").fadeIn("fast").delay("1000").fadeOut("slow")}}),addperformance.getData($my.propertyid,6,1,1,1);var e=sessionStorage.getItem("globaltimeSelect");if(null!=e&&"null"!=e){e=JSON.parse(e);var o=$my.timeList.querySelectorAll("li[data-index]");o=Array.prototype.slice.call(o);for(var t=0;t<o.length;t++)if(o[t].dataset.index===e){$(o[t]).addClass("optionListActive").siblings("li").removeClass("optionListActive");var a=$(o[t]).offset().left,r=$($my.timeList).offset().left;$($my.timeList).stop().animate({scrollLeft:a-r-8},500)}addperformance.buffer()}else addperformance.getData($my.propertyid,1,1,1);var n=timeList.querySelectorAll("li");Array.prototype.forEach.call(n,function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("optionListActive").siblings("li").removeClass("optionListActive"),addperformance.throttle(addperformance.buffer,this)},!1)});var s=document.querySelector(".indexWrap"),i=s.querySelectorAll(".row");Array.prototype.forEach.call(i,function(e,o){e.addEventListener("click",function(e){switch(e.preventDefault(),e.stopPropagation(),o){case 0:window.location.href="chengjiao_list.html";break;case 1:window.location.href="sign_list.html";break;case 2:window.location.href="huiKuan_list.html";break;case 3:window.location.href="commission_list.html";break;case 4:window.location.href="tuiDing_list.html";break;case 5:window.location.href="tuiFang_list.html";break;case 6:window.location.href="report_list.html";break;case 7:window.location.href="visit_list.html";break;case 8:window.location.href="newChannel_list.html";break;case 9:$my.messageInfo.html("暂停查询").fadeIn("fast").delay("1000").fadeOut("slow")}},!1)}),document.querySelector("#baobeiConfirmID").addEventListener("touchend",function(e){e.preventDefault(),e.stopPropagation(),addperformance.throttle(addperformance.baobeiSearch,this)},!1),$("#anchang_group").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.location.href="anchang_group_list.html"}),$("#liandong_group").on("click",function(e){e.preventDefault(),e.stopPropagation(),window.location.href="liandong_group_list.html"})});