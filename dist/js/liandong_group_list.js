function Bar(){this.categories=[],this.data_dk=[],this.data_cj=[],this.eleid=""}function Saleuser(){this.addAgencySum="",this.stepPropertySum="",this.reportCustomerSum="",this.customerLookSum="",this.totalHouseSum="",this.totalSalesSum="",this.agencyPaySum="",this.agencyPayMoneySum="",this.tdHouseSum="--",this.tdHouseMoneySum="--",this.tfHouseSum="--",this.tfHouseMoneySum="--",this.lfScale="",this.cjScale="",Object.defineProperty(this,"tdHouseSum",{value:"-- ",writable:!1}),Object.defineProperty(this,"tdHouseMoneySum",{value:"-- ",writable:!1}),Object.defineProperty(this,"tfHouseSum",{value:"-- ",writable:!1}),Object.defineProperty(this,"tfHouseMoneySum",{value:"-- ",writable:!1}),Object.defineProperty(this,"lfScale",{get:function(){var e=/^[0-9]*$/;return e.test(this.reportCustomerSum)&&e.test(this.customerLookSum)&&""!=this.reportCustomerSum&&""!=this.customerLookSum&&"0"!==this.customerLookSum?lfScale=(this.reportCustomerSum/this.customerLookSum).toFixed(2)+":1":lfScale="--"},set:function(e){lfScale=e}}),Object.defineProperty(this,"cjScale",{get:function(){var e=/^[0-9]*$/;return e.test(this.customerLookSum)&&e.test(this.totalHouseSum)&&""!=this.customerLookSum&&""!=this.totalHouseSum&&"0"!==this.totalHouseSum?cjScale=(this.customerLookSum/this.totalHouseSum).toFixed(2)+":1":cjScale="--"},set:function(e){cjScale=e}}),this.config={addAgencySum:document.querySelector("#addAgencySum"),stepPropertySum:document.querySelector("#stepPropertySum"),reportCustomerSum:document.querySelector("#reportCustomerSum"),customerLookSum:document.querySelector("#customerLookSum"),totalHouseSum:document.querySelector("#totalHouseSum"),totalSalesSum:document.querySelector("#totalSalesSum"),agencyPaySum:document.querySelector("#agencyPaySum"),agencyPayMoneySum:document.querySelector("#agencyPayMoneySum"),tdHouseSum:document.querySelector("#tdHouseSum"),tdHouseMoneySum:document.querySelector("#tdHouseMoneySum"),tfHouseSum:document.querySelector("#tfHouseSum"),tfHouseMoneySum:document.querySelector("#tfHouseMoneySum"),lfScale:document.querySelector("#lfScale"),cjScale:document.querySelector("#cjScale")}}Bar.prototype={constructor:Bar,barChart:function(){Highcharts.chart(this.eleid,{chart:{type:"bar",backgroundColor:"#49484e",marginTop:35},title:{text:null},subtitle:{text:null},credits:{enabled:!1},exporting:{enabled:!1},xAxis:{tickWidth:0,gridLineWidth:0,lineColor:"#49484e",categories:this.categories,title:{text:null},labels:{style:{color:"#A4A4A7",fontSize:"12px",fontWeight:"normal"}}},yAxis:{min:0,title:{text:"",align:"high"},labels:{enabled:!1},gridLineWidth:0},tooltip:{enabled:!1,backgroundColor:"#FCFFC5",borderColor:"black",borderRadius:10,borderWidth:3,shadow:!0,animation:!0,style:{color:"#666",fontSize:"12px",fontWeight:"normal",fontFamily:"Courir new"}},plotOptions:{bar:{dataLabels:{enabled:!0,style:{color:"#3BAFC1",fontWeight:"normal"}}},series:{borderWidth:0,pointWidth:6,borderRadius:4}},legend:{enabled:!0,align:"top",verticalAlign:"top",y:0,padding:0,margin:100,itemMarginTop:0,itemMarginBottom:0,floating:!0,symbolWidth:20,itemStyle:{color:"#fff",cursor:"pointer",fontSize:"14px",fontWeight:"normal"}},credits:{enabled:!1},series:[{name:"带看",color:"#3BAFC1",data:this.data_dk},{name:"成交",color:"#fff",data:this.data_cj}]}),$("tspan.highcharts-text-outline").css({fill:"none",stroke:"rgb(53,52,59)"})}};var dkcjBar=new Bar;Saleuser.prototype={constructor:Saleuser,throttle:function(e,t){clearTimeout(e.tId),e.tId=setTimeout(function(){e.call(t)},500)},rederSaleuser:function(e){var t="",a=e.PlaceUserLeaderList,s=e.PlaceUserLeaderNameList;if(""===a||""===s)return $my.messageInfo.html("暂无组别").fadeIn("fast").delay("1000").fadeOut("slow"),!1;a=a.split(","),s=s.split(","),t+='<li id="saleuserList_all" class="text-center activeSelect" data-info="all">全部</li>';for(var o=0;o<a.length;o++)t+='<li class="text-center" data-info='+a[o]+">"+s[o]+"组</li>";$my.saleuserList.innerHTML=t},getSaleUserList:function(e,t){if(null==e||"null"==e)return $my.messageInfo.html("楼盘参数丢失").fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/placeusercontroller/placeUserListApp.json",data:{propertyId:e,timeselete:t},async:!1,success:function(e){if(sessionStorage.setItem("liandongSaleUserList",JSON.stringify(e)),"{}"===JSON.stringify(e))return void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");saleuser.rederSaleuser(e)}})},bindDom:function(){this.config.addAgencySum.innerHTML=this.addAgencySum,this.config.stepPropertySum.innerHTML=this.stepPropertySum,this.config.reportCustomerSum.innerHTML=this.reportCustomerSum,this.config.customerLookSum.innerHTML=this.customerLookSum,this.config.totalHouseSum.innerHTML=this.totalHouseSum,this.config.totalSalesSum.innerHTML=this.totalSalesSum,this.config.agencyPaySum.innerHTML=this.agencyPaySum,this.config.agencyPayMoneySum.innerHTML=this.agencyPayMoneySum,this.config.tdHouseSum.innerHTML=this.tdHouseSum,this.config.tdHouseMoneySum.innerHTML=this.tdHouseMoneySum,this.config.tfHouseSum.innerHTML=this.tfHouseSum,this.config.tfHouseMoneySum.innerHTML=this.tfHouseMoneySum,this.config.lfScale.innerHTML=this.lfScale,this.config.cjScale.innerHTML=this.cjScale},renderBar:function(e,t,a){var s=document.getElementById("dkcjContainer");dkcjBar.categories=e,dkcjBar.data_dk=t,dkcjBar.data_cj=a,dkcjBar.eleid="dkcjContainer",s.style.height=80*dkcjBar.categories.length+"px",dkcjBar.barChart()},renderData:function(e){var t="",a=document.querySelector("#tbody"),s=[],o=[],r=[];if(!e.length)return $my.messageInfo.html("暂无信息").fadeIn("fast").delay("1000").fadeOut("slow"),!1;for(var l=0;l<e.length;l++)e[l].placeName?(t+="<tr data-placeUserID="+e[l].placeUserID+">",t+="<td>"+e[l].placeName+"</td>",t+="<td>"+e[l].ReportCustomer+"</td>",t+="<td>"+e[l].CustomerLook+"</td>",t+="<td>"+e[l].TotalHouse+"</td>",t+="<td>"+(e[l].TotalSales/1e4).toFixed(0)+"</td>",t+="<td>"+e[l].AgencyPay+"</td>",t+="<td>"+(e[l].AgencyPayMoney/1e4).toFixed(0)+"</td>",t+="<td>"+e[l].AddAgency+"</td>",t+="<td>"+e[l].StepProperty+"</td>",t+="<td>--</td>",t+="<td>--</td>",t+="</tr>",s.push(e[l].placeName),o.push(e[l].CustomerLook),r.push(e[l].TotalHouse)):(t+="<tr data-PlaceUserLeaderID="+e[l].PlaceUserLeaderID+">",t+="<td>"+e[l].PlaceUserLeaderName+"组</td>",t+="<td>"+e[l].ReportCustomer+"</td>",t+="<td>"+e[l].CustomerLook+"</td>",t+="<td>"+e[l].TotalHouse+"</td>",t+="<td>"+(e[l].TotalSales/1e4).toFixed(0)+"</td>",t+="<td>"+e[l].AgencyPay+"</td>",t+="<td>"+(e[l].AgencyPayMoney/1e4).toFixed(0)+"</td>",t+="<td>"+e[l].AddAgency+"</td>",t+="<td>"+e[l].StepProperty+"</td>",t+="<td>--</td>",t+="<td>--</td>",t+="</tr>",s.push(e[l].PlaceUserLeaderName+"组"),o.push(e[l].CustomerLook),r.push(e[l].TotalHouse));a.innerHTML=t,saleuser.renderBar(s,o,r),t=null,s=null,o=null,r=null},getData:function(e,t,a,s){if(null==e||"null"==e)return $my.messageInfo.html("楼盘参数丢失").fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/placeusercontroller/"+s+".json",data:{propertyId:e,timeselete:t,PlaceUserLeader:a},success:function(e){if(sessionStorage.setItem("liandongGroupData",JSON.stringify(e)),"{}"===JSON.stringify(e))return void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");saleuser.addAgencySum=e.addAgencySum,saleuser.stepPropertySum=e.stepPropertySum,saleuser.reportCustomerSum=e.reportCustomerSum,saleuser.customerLookSum=e.customerLookSum,saleuser.totalHouseSum=e.totalHouseSum,saleuser.totalSalesSum=(e.totalSalesSum/1e4).toFixed(0),saleuser.agencyPaySum=e.agencyPaySum,saleuser.agencyPayMoneySum=(e.agencyPayMoneySum/1e4).toFixed(0),saleuser.bindDom(),saleuser.renderData(e.resultList)}})},buffer:function(){var e=$my.countType.querySelector(".optionListActive").dataset.index;if(sessionStorage.setItem("globaltimeSelect",JSON.stringify(e)),"0"===e||"5"===e)return void $my.messageInfo.html("今日/自定暂停查询").fadeIn("fast").delay("1000").fadeOut("slow");var t=$my.saleuserList.querySelector(".activeSelect").dataset.info;sessionStorage.setItem("saleuserListID_ld_Active",JSON.stringify(t)),"all"===t?saleuser.getData($my.propertyid,e,"","placeLeaderListApp"):saleuser.getData($my.propertyid,e,t,"placeListApp")},bindmoduleEvents:function(){var e=$(this).index(),t=$my.saleuserList.querySelector(".activeSelect").dataset.info;if("all"===t)switch(e){case 0:window.location.href="newChannel_list.html";break;case 1:$my.messageInfo.html("暂停查询").fadeIn("fast").delay("1000").fadeOut("slow");break;case 2:window.location.href="report_list.html";break;case 3:window.location.href="visit_ld_list.html";break;case 4:window.location.href="chengjiao_ld_list.html";break;case 5:window.location.href="commission_list.html";break;case 6:case 7:$my.messageInfo.html("暂停查询").fadeIn("fast").delay("1000").fadeOut("slow")}else switch(sessionStorage.removeItem("globalPeopleID"),e){case 0:window.location.href="newChannel_groupMember_list.html?PlaceUserLeader="+t;break;case 1:$my.messageInfo.html("暂停查询").fadeIn("fast").delay("1000").fadeOut("slow");break;case 2:window.location.href="report_groupMember_list.html?PlaceUserLeader="+t;break;case 3:window.location.href="visit_groupMember_ld_list.html?PlaceUserLeader="+t;break;case 4:window.location.href="chengjiao_groupMember_ld_list.html?PlaceUserLeader="+t;break;case 5:window.location.href="commission_groupMember_list.html?PlaceUserLeader="+t;break;case 6:case 7:$my.messageInfo.html("暂停查询").fadeIn("fast").delay("1000").fadeOut("slow")}},bindtableEvents:function(){var e=$(this).index(),t=$my.saleuserList.querySelector(".activeSelect").dataset.info,a=this.parentNode.dataset.placeuserleaderid,s=this.parentNode.dataset.placeuserid;if("all"===t)switch(e){case 0:var o=$my.saleuserList.querySelectorAll("li[data-info]");Array.prototype.forEach.call(o,function(e){e.dataset.info===a&&$(e).trigger("click")});break;case 1:window.location.href="report_list.html?PlaceUserLeader="+a;break;case 2:window.location.href="visit_ld_list.html?PlaceUserLeader="+a;break;case 3:case 4:window.location.href="chengjiao_ld_list.html?PlaceUserLeader="+a;break;case 5:case 6:window.location.href="commission_list.html?PlaceUserLeader="+a;break;case 7:window.location.href="newChannel_list.html?PlaceUserLeader="+a;break;case 8:case 9:case 10:$my.messageInfo.html("暂停查询").fadeIn("fast").delay("1000").fadeOut("slow")}else switch(sessionStorage.removeItem("globalPeopleID"),e){case 0:window.location.href="liandong_groupMembers_detail.html?placeuserid="+s;break;case 1:window.location.href="report_groupMember_list.html?PlaceUserLeader="+t+"&placeuserid="+s;break;case 2:window.location.href="visit_groupMember_ld_list.html?PlaceUserLeader="+t+"&placeuserid="+s;break;case 3:case 4:window.location.href="chengjiao_groupMember_ld_list.html?PlaceUserLeader="+t+"&placeuserid="+s;break;case 5:case 6:window.location.href="commission_groupMember_list.html?PlaceUserLeader="+t+"&placeuserid="+s;break;case 7:window.location.href="newChannel_groupMember_list.html?PlaceUserLeader="+t+"&placeuserid="+s;break;case 8:case 9:case 10:$my.messageInfo.html("暂停查询").fadeIn("fast").delay("1000").fadeOut("slow")}}};var saleuser=new Saleuser;$(function(){window.$my={messageInfo:$(".messageInfo"),propertyid:sessionStorage.getItem("propertyID"),countType:document.querySelector("#countType"),saleuserList:document.querySelector("#saleuserList")},$.ajaxSetup({type:"POST",dataType:"json",error:function(){$my.messageInfo.html("服务错误").fadeIn("fast").delay("1000").fadeOut("slow")}});var e=sessionStorage.getItem("liandongSaleUserList"),t=sessionStorage.getItem("saleuserListID_ld_Active");if(null!=e&&"null"!=e){if("{}"===e)return void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");if(e=JSON.parse(e),saleuser.rederSaleuser(e),null!=t&&"null"!=t&&"{}"!==t){t=JSON.parse(t);var a=$my.saleuserList.querySelectorAll("li[data-info]");a=Array.prototype.slice.call(a);for(var s=0;s<a.length;s++)a[s].dataset.info===t&&$(a[s]).addClass("activeSelect").siblings("li").removeClass("activeSelect")}}else saleuser.getSaleUserList($my.propertyid,6);var o=sessionStorage.getItem("liandongGroupData"),r=sessionStorage.getItem("globaltimeSelect");if(null!=o&&"null"!=o)if("{}"!==o)if(null!=r&&"null"!=r&&"{}"!==r){r=JSON.parse(r);var l=$my.countType.querySelectorAll("li[data-index]");l=Array.prototype.slice.call(l);for(var s=0;s<l.length;s++)if(l[s].dataset.index==r){$(l[s]).addClass("optionListActive").siblings("li").removeClass("optionListActive");var i=$(l[s]).offset().left,n=$($my.countType).offset().left;$($my.countType).stop().animate({scrollLeft:i-n-8},500)}saleuser.buffer()}else o=JSON.parse(o),saleuser.addAgencySum=o.addAgencySum,saleuser.stepPropertySum=o.stepPropertySum,saleuser.reportCustomerSum=o.reportCustomerSum,saleuser.customerLookSum=o.customerLookSum,saleuser.totalHouseSum=o.totalHouseSum,saleuser.totalSalesSum=(o.totalSalesSum/1e4).toFixed(0),saleuser.agencyPaySum=o.agencyPaySum,saleuser.agencyPayMoneySum=(o.agencyPayMoneySum/1e4).toFixed(0),saleuser.bindDom(),saleuser.renderData(o.resultList);else $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");else if(null!=r&&"null"!=r&&"{}"!==r){r=JSON.parse(r);var l=$my.countType.querySelectorAll("li[data-index]");l=Array.prototype.slice.call(l);for(var s=0;s<l.length;s++)if(l[s].dataset.index==r){$(l[s]).addClass("optionListActive").siblings("li").removeClass("optionListActive");var i=$(l[s]).offset().left,n=$($my.countType).offset().left;$($my.countType).stop().animate({scrollLeft:i-n-8},500)}saleuser.buffer()}else saleuser.getData($my.propertyid,1,"","placeLeaderListApp");var l=$my.countType.querySelectorAll("li[data-index]");Array.prototype.forEach.call(l,function(e){e.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),e.classList.add("optionListActive");for(var a=Array.prototype.filter.call(e.parentNode.children,function(t){return t!==e}),s=0;s<a.length;s++)a[s].classList.remove("optionListActive");saleuser.throttle(saleuser.buffer,this)},!1)}),$($my.saleuserList).on("click","li",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("activeSelect").siblings("li").removeClass("activeSelect"),saleuser.throttle(saleuser.buffer,this)}),$(".module ul li").on("click",function(e){e.preventDefault(),e.stopPropagation(),saleuser.throttle(saleuser.bindmoduleEvents,this)}),$(".hk_table").on("click",".table>tbody>tr>td",function(e){e.preventDefault(),e.stopPropagation(),saleuser.throttle(saleuser.bindtableEvents,this)})});