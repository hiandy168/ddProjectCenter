var ReportDetail=function(e){var t=function(){return new t.fn.init};return t.fn=t.prototype={constructor:t,init:function(){this.PlaceReserve="",this.LookCustomer="",this.TotalSale="",this.TotalHouse="",this.ReservatMoney="",this.ReservatHouse="",this.cjScale="",this.PaymentBack="",this.PaymentHouse="",this.BreakHouseMoney="",this.BreakHouse="",this.tfSum="",this.tfSut="",Object.defineProperty(this,"cjScale",{get:function(){var e=/^[0-9]*$/;return e.test(this.LookCustomer)&&e.test(this.TotalHouse)&&""!=this.LookCustomer&&""!=this.TotalHouse&&0!==this.TotalHouse?cjScale=(this.LookCustomer/this.TotalHouse).toFixed(2)+":1":cjScale="--"},set:function(e){cjScale=e}}),Object.defineProperty(this,"PaymentHouse",{value:"-- ",writable:!1}),Object.defineProperty(this,"tfSum",{value:"-- ",writable:!1}),Object.defineProperty(this,"tfSut",{value:"-- ",writable:!1}),this.config={PlaceReserve:document.querySelector("#PlaceReserve"),LookCustomer:document.querySelector("#LookCustomer"),TotalSale:document.querySelector("#TotalSale"),TotalHouse:document.querySelector("#TotalHouse"),ReservatMoney:document.querySelector("#ReservatMoney"),ReservatHouse:document.querySelector("#ReservatHouse"),cjScale:document.querySelector("#cjScale"),PaymentBack:document.querySelector("#PaymentBack"),PaymentHouse:document.querySelector("#PaymentHouse"),BreakHouseMoney:document.querySelector("#BreakHouseMoney"),BreakHouse:document.querySelector("#BreakHouse"),tfSum:document.querySelector("#tfSum"),tfSut:document.querySelector("#tfSut")},this.bindDom=function(){this.bindDom_init()},this.getSaleid=function(e){this.getSaleid_init(e)},this.getData=function(e,t,o){this.getData_init(e,t,o)}},bindDom_init:function(){this.config.PlaceReserve.innerHTML=this.PlaceReserve,this.config.LookCustomer.innerHTML=this.LookCustomer,this.config.TotalSale.innerHTML=this.TotalSale,this.config.TotalHouse.innerHTML=this.TotalHouse,this.config.ReservatMoney.innerHTML=this.ReservatMoney,this.config.ReservatHouse.innerHTML=this.ReservatHouse,this.config.cjScale.innerHTML=this.cjScale,this.config.PaymentBack.innerHTML=this.PaymentBack,this.config.PaymentHouse.innerHTML=this.PaymentHouse,this.config.BreakHouseMoney.innerHTML=this.BreakHouseMoney,this.config.BreakHouse.innerHTML=this.BreakHouse,this.config.tfSum.innerHTML=this.tfSum,this.config.tfSut.innerHTML=this.tfSut},getSaleid_init:function(e){if(-1==e.location.href.indexOf("saleid"))return $my.messageInfo.html("url错误").fadeIn("fast").delay("1000").fadeOut("slow"),!1;var t=e.location.search;t=t.split("=")[1],$my.saleid=t},getData_init:function(e,t,o){if(null==e||"null"==e)return $my.messageInfo.html("楼盘参数丢失").fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/saleusercontroller/saleApp.json",data:{propertyID:e,countType:t,saleUserID:o},success:function(e){if("{}"===JSON.stringify(e))return void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");var t=e.resultList;if(!t.length)return void $my.messageInfo.html("数据为空").stop().fadeIn("fast").delay("1000").fadeOut("slow");var o=t[0];reportDetail.PlaceReserve=o.PlaceReserve,reportDetail.LookCustomer=o.LookCustomer,reportDetail.TotalSale=(o.TotalSale/1e4).toFixed(4),reportDetail.TotalHouse=o.TotalHouse,reportDetail.ReservatMoney=(o.ReservatMoney/1e4).toFixed(4),reportDetail.ReservatHouse=o.ReservatHouse,reportDetail.PaymentBack=(o.PaymentBack/1e4).toFixed(4),reportDetail.BreakHouseMoney=(o.BreakHouseMoney/1e4).toFixed(4),reportDetail.BreakHouse=o.BreakHouse,reportDetail.bindDom()}})},throttle:function(e,t){clearTimeout(e.tId),e.tId=setTimeout(function(){e.call(t)},500)},buffer:function(){var e=this.dataset.index;if("0"===e||"6"===e)return $my.messageInfo.html("今日/自定暂停查询").fadeIn("fast").delay("1000").fadeOut("slow"),!1;reportDetail.getData($my.propertyid,e,$my.saleid)}},t.fn.init.prototype=t.fn,t}(),reportDetail=ReportDetail();$(function(){window.$my={messageInfo:$(".messageInfo"),propertyid:sessionStorage.getItem("propertyID")},$.ajaxSetup({type:"POST",dataType:"json",error:function(){$my.messageInfo.html("服务错误").fadeIn("fast").delay("1000").fadeOut("slow")}}),reportDetail.getSaleid(window),reportDetail.getData($my.propertyid,1,$my.saleid);var e=document.querySelector("#countType"),t=e.querySelectorAll("li");Array.prototype.forEach.call(t,function(e){e.addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),$(this).addClass("optionListActive").siblings("li").removeClass("optionListActive"),reportDetail.throttle(reportDetail.buffer,this)},!1)})});