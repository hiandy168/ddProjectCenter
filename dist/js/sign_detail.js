var ReportDetail=function(e){var t=function(){return new t.fn.init};return t.fn=t.prototype={constructor:t,init:function(){this.customerName="",this.customerPhone="",this.houseName="",this.placeName="",this.agencyName="",this.memberName="",this.memberPhone="",this.saleName="",this.signTime="",this.signMoney="",this.dealArea="",this.purchaseWay="",this.salePrice="",this.groupName="",this.groupShouldpay="",this.groupActualpay="",this.remark="",this.rewardActual="",this.rewardTotal="",this.cashPrice="",this.commissiondiscount="",this.tooltip="",Object.defineProperty(this,"purchaseWay",{value:"-- ",writable:!1}),this.config={customerName:document.querySelector("#customerName"),customerPhone:document.querySelector("#customerPhone"),houseName:document.querySelector("#houseName"),placeName:document.querySelector("#placeName"),agencyName:document.querySelector("#agencyName"),memberName:document.querySelector("#memberName"),memberPhone:document.querySelector("#memberPhone"),saleName:document.querySelector("#saleName"),signTime:document.querySelector("#signTime"),signMoney:document.querySelector("#signMoney"),dealArea:document.querySelector("#dealArea"),purchaseWay:document.querySelector("#purchaseWay"),salePrice:document.querySelector("#salePrice"),groupName:document.querySelector("#groupName"),groupShouldpay:document.querySelector("#groupShouldpay"),groupActualpay:document.querySelector("#groupActualpay"),remark:document.querySelector("#remark"),rewardActual:document.querySelector("#rewardActual"),rewardTotal:document.querySelector("#rewardTotal"),cashPrice:document.querySelector("#cashPrice"),commissiondiscount:document.querySelector("#commissiondiscount"),tooltip:document.querySelector("#tooltip")},this.bindDom=function(){this.bindDom_init()},this.getDetailed=function(e){this.getDetailed_init(e)},this.getData=function(e){this.getData_init(e)}},bindDom_init:function(){if(this.config.customerName.innerHTML=this.customerName,this.config.customerPhone.innerHTML=this.customerPhone,this.config.houseName.innerHTML=this.houseName,this.config.placeName.innerHTML=this.placeName,this.config.agencyName.innerHTML=this.agencyName,this.config.memberName.innerHTML=this.memberName,this.config.memberPhone.innerHTML=this.memberPhone,this.config.saleName.innerHTML=this.saleName,this.config.signTime.innerHTML=this.signTime,this.config.signMoney.innerHTML=this.signMoney,this.config.dealArea.innerHTML=this.dealArea,this.config.purchaseWay.innerHTML=this.purchaseWay,this.config.salePrice.innerHTML=this.salePrice,this.config.groupName.innerHTML=this.groupName,this.config.groupShouldpay.innerHTML=this.groupShouldpay,this.config.groupActualpay.innerHTML=this.groupActualpay,this.config.remark.innerHTML=this.remark,this.config.rewardActual.innerHTML=this.rewardActual,this.config.rewardTotal.innerHTML=this.rewardTotal,this.config.cashPrice.innerHTML=this.cashPrice,this.config.commissiondiscount.innerHTML=this.commissiondiscount,this.config.tooltip.setAttribute("title",this.tooltip),!this.agencyName){document.querySelector(".mainItem").getElementsByTagName("section")[0].style.display="none"}},getDetailed_init:function(e){if(-1==e.location.href.indexOf("detailed"))throw $my.messageInfo.html("url错误").fadeIn("fast").delay("1000").fadeOut("slow"),new Error("url错误");var t=e.location.search;t=t.split("=")[1],$my.detailed=t},getData_init:function(e){if(null==e||"null"==e)return $my.messageInfo.html("参数丢失").fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/overview/signDetailedApp.json",data:{id:e},success:function(e){if("{}"===JSON.stringify(e))return void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");var t=e.data;if("{}"===JSON.stringify(t))return void $my.messageInfo.html("数据为空").stop().fadeIn("fast").delay("1000").fadeOut("slow");reportDetail.customerName=t.customerName,reportDetail.customerPhone=t.customerPhone,reportDetail.houseName=t.houseName,reportDetail.placeName=t.placeName,reportDetail.agencyName=t.agencyName,reportDetail.memberName=t.memberName,reportDetail.memberPhone=t.memberPhone,reportDetail.saleName=t.saleName,reportDetail.signTime=t.signTime,reportDetail.signMoney=t.signMoney,reportDetail.dealArea=t.dealArea,reportDetail.purchaseWay=t.purchaseWay,reportDetail.salePrice=t.salePrice,reportDetail.groupName=t.groupName,reportDetail.groupShouldpay=(t.groupShouldpay/1e4).toFixed(0),reportDetail.groupActualpay=(t.groupActualpay/1e4).toFixed(0),reportDetail.remark=t.remark,reportDetail.rewardActual=t.rewardActual,reportDetail.rewardTotal=t.rewardTotal,reportDetail.cashPrice=t.cashPrice,reportDetail.commissiondiscount=t.commissiondiscount,reportDetail.tooltip=t.customerName+t.customerPhone,reportDetail.bindDom(),reportDetail.renderPaydata_init(e.paydata)},complete:function(){$('[data-toggle="tooltip"]').tooltip()}})},renderPaydata_init:function(e){if(!e.length)return $my.messageInfo.html("暂无回款信息").fadeIn("fast").delay("1000").fadeOut("slow"),!1;for(var t="",a=document.getElementById("paydata"),i=0,o=e.length;i<o;i++)""===e[i].paymentDate.toString().trim()&&(e[i].paymentDate="--"),""===e[i].paymentModle.toString().trim()&&(e[i].paymentModle="--"),""===e[i].payment.toString().trim()&&(e[i].payment="--"),""===e[i].saleName.toString().trim()&&(e[i].saleName="--"),t+="<tr>",t+="<td><span>"+e[i].paymentDate+"</span></td>",t+="<td><span>"+e[i].paymentModle+"</span></td>",t+="<td><span>"+(e[i].payment/1e4).toFixed(0)+"</span>万元</td>",t+='<td><kbd class="bgcGray"><span>案</span>:<span>'+e[i].saleName+"</span></kbd></td>",t+="<tr>";a.innerHTML=t}},t.fn.init.prototype=t.fn,t}(),reportDetail=ReportDetail();$(function(){window.$my={messageInfo:$(".messageInfo")},$.ajaxSetup({type:"POST",dataType:"json",error:function(){$my.messageInfo.html("服务错误").fadeIn("fast").delay("1000").fadeOut("slow")}}),reportDetail.getDetailed(window),reportDetail.getData($my.detailed),window.addEventListener("touchmove",function(){$("#tooltip").tooltip("hide")},!1),window.addEventListener("touchend",function(){window.removeEventListener("touchmove",function(){$("#tooltip").tooltip("hide")},!1)},!1)});