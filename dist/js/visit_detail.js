var ReportDetail=function(e){var t=function(){return new t.fn.init};return t.fn=t.prototype={constructor:t,init:function(){this.customerName="",this.customerTel="",this.lookTime="",this.paleceName="",this.agencyName="",this.memberName="",this.memberTel="",this.saleName="",this.tooltip="",this.loglist=[],this.khyx="",Object.defineProperty(this,"purchaseWay",{value:"-- ",writable:!1}),this.config={customerName:document.querySelector("#customerName"),customerTel:document.querySelector("#customerTel"),lookTime:document.querySelector("#lookTime"),paleceName:document.querySelector("#paleceName"),agencyName:document.querySelector("#agencyName"),memberName:document.querySelector("#memberName"),memberTel:document.querySelector("#memberTel"),saleName:document.querySelector("#saleName"),tooltip:document.querySelector("#tooltip")},this.bindDom=function(){this.bindDom_init()},this.getDetailed=function(e){this.getDetailed_init(e)},this.getData=function(e,t){this.getData_init(e,t)},this.renderlogList=function(){this.renderlogList_init()}},bindDom_init:function(){if(this.config.customerName.innerHTML=this.customerName,this.config.customerTel.innerHTML=this.customerTel,this.config.lookTime.innerHTML=this.lookTime,this.config.paleceName.innerHTML=this.paleceName,this.config.agencyName.innerHTML=this.agencyName,this.config.memberName.innerHTML=this.memberName,this.config.memberTel.innerHTML=this.memberTel,this.config.saleName.innerHTML=this.saleName,this.config.tooltip.setAttribute("title",this.tooltip),!this.agencyName){document.querySelector(".mainItem").getElementsByTagName("section")[0].style.display="none"}},getDetailed_init:function(e){if(-1==e.location.href.indexOf("detailed"))throw $my.messageInfo.html("url错误").fadeIn("fast").delay("1000").fadeOut("slow"),new Error("url错误");var t=e.location.search;t=t.split("=")[1],$my.detailed=t},getData_init:function(e,t){if(null==e||"null"==e)return $my.messageInfo.html("参数丢失").fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/overview/lookDetailedApp.json",data:{id:e,propertyID:t},success:function(e){if("{}"===JSON.stringify(e))return void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");reportDetail.loglist=e.loglist;var t=e.data;if("{}"===JSON.stringify(t))return void $my.messageInfo.html("数据为空").stop().fadeIn("fast").delay("1000").fadeOut("slow");reportDetail.customerName=t.customerName,reportDetail.customerTel=t.customerTel,reportDetail.lookTime=t.lookTime.substr(5),reportDetail.paleceName=t.paleceName,reportDetail.agencyName=t.agencyName,reportDetail.memberName=t.memberName,reportDetail.memberTel=t.memberTel,reportDetail.saleName=t.saleName,reportDetail.tooltip=t.customerName+t.customerTel,reportDetail.khyx=t.houseName.toString().trim(),reportDetail.bindDom(),reportDetail.renderlogList()},complete:function(){$('[data-toggle="tooltip"]').tooltip()}})},renderlogList_init:function(){if(!this.loglist)return $my.messageInfo.html("暂无来访信息").fadeIn("fast").delay("1000").fadeOut("slow"),!1;for(var e="",t=document.querySelector(".append"),s=this.loglist.length-1;s>=0;s--){var i=this.loglist[s].times,o="";switch(i){case 1:o="一访";break;case 2:o="二访";break;case 3:o="三访";break;case 4:o="四访";break;case 5:o="五访";break;case 6:o="六访";break;case 7:o="七访";break;case 8:o="八访";break;case 9:o="九访";break;case 10:o="十访";break;default:o="超过十访..."}e+='<div class="main no_line special_main"><div class="row in_title">',e+='<div class="col-sm-4 col-xs-4 col-md-4">'+o+"</div>",e+='<div class="col-sm-8 col-xs-8 col-md-8 text-right colorGreen">客户意向:<span>'+this.khyx+"</span></div>",e+='</div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">来访时间</div><div class="col-sm-8 col-xs-8 col-md-8">',e+="<span>"+this.loglist[s].lfTime+"</span>",e+='</div></div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">客户一</div><div class="col-sm-8 col-xs-8 col-md-8 nowrap">',e+="<span>"+this.loglist[s].cusName+"</span>&nbsp;&nbsp;<span></span>",e+='</div></div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">来访人数</div><div class="col-sm-8 col-xs-8 col-md-8">',e+="<span>"+this.loglist[s].number+"</span>人",e+='</div></div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">落座</div><div class="col-sm-8 col-xs-8 col-md-8">',e+="<span>"+this.loglist[s].isSeat+"</span>",e+='</div></div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">落位</div><div class="col-sm-8 col-xs-8 col-md-8">',e+="<span>"+this.loglist[s].houseNameArr+"</span>",e+='</div></div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">价格预算</div><div class="col-sm-8 col-xs-8 col-md-8">',e+="<span>"+this.loglist[s].givenPrice+"</span>元",e+='</div></div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">下次来访</div><div class="col-sm-8 col-xs-8 col-md-8">',e+="<span>"+this.loglist[s].nextTime+"</span>",e+='</div></div><div class="row"><div class="col-sm-4 col-xs-4 col-md-4">备注</div><div class="col-sm-8 col-xs-8 col-md-8">',e+="<span>"+this.loglist[s].remark+"</span>",e+="</div></div></div>"}t.innerHTML=e}},t.fn.init.prototype=t.fn,t}(),reportDetail=ReportDetail();$(function(){window.$my={messageInfo:$(".messageInfo"),propertyid:sessionStorage.getItem("propertyID")},$.ajaxSetup({type:"POST",dataType:"json",error:function(){$my.messageInfo.html("服务错误").fadeIn("fast").delay("1000").fadeOut("slow")}}),reportDetail.getDetailed(window),reportDetail.getData($my.detailed,$my.propertyid)});