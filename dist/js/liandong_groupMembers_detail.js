var ReportDetail=function(t){var e=function(){return new e.fn.init};return e.fn=e.prototype={constructor:e,init:function(){this.AddAgency="",this.StepProperty="",this.ReportCustomer="",this.CustomerLook="",this.lfScale="",this.TotalSales="",this.TotalHouse="",this.qySum="",this.qySut="",this.cjScale="",this.AgencyPayMoney="",this.AgencyPay="",this.tdSum="",this.tdSut="",this.tfSum="",this.tfSut="",Object.defineProperty(this,"lfScale",{get:function(){var t=/^[0-9]*$/;return t.test(this.ReportCustomer)&&t.test(this.CustomerLook)&&""!=this.ReportCustomer&&""!=this.CustomerLook&&0!==this.CustomerLook?lfScale=(this.ReportCustomer/this.CustomerLook).toFixed(2)+":1":lfScale="--"},set:function(t){lfScale=t}}),Object.defineProperty(this,"cjScale",{get:function(){var t=/^[0-9]*$/;return t.test(this.CustomerLook)&&t.test(this.TotalHouse)&&""!=this.CustomerLook&&""!=this.TotalHouse&&0!==this.TotalHouse?cjScale=(this.CustomerLook/this.TotalHouse).toFixed(2)+":1":cjScale="--"},set:function(t){cjScale=t}}),Object.defineProperty(this,"qySum",{value:"-- ",writable:!1}),Object.defineProperty(this,"qySut",{value:"-- ",writable:!1}),Object.defineProperty(this,"tdSum",{value:"-- ",writable:!1}),Object.defineProperty(this,"tdSut",{value:"-- ",writable:!1}),Object.defineProperty(this,"tfSum",{value:"-- ",writable:!1}),Object.defineProperty(this,"tfSut",{value:"-- ",writable:!1}),this.config={AddAgency:document.querySelector("#AddAgency"),StepProperty:document.querySelector("#StepProperty"),ReportCustomer:document.querySelector("#ReportCustomer"),CustomerLook:document.querySelector("#CustomerLook"),lfScale:document.querySelector("#lfScale"),TotalSales:document.querySelector("#TotalSales"),TotalHouse:document.querySelector("#TotalHouse"),qySum:document.querySelector("#qySum"),qySut:document.querySelector("#qySut"),cjScale:document.querySelector("#cjScale"),AgencyPayMoney:document.querySelector("#AgencyPayMoney"),AgencyPay:document.querySelector("#AgencyPay"),tdSum:document.querySelector("#tdSum"),tdSut:document.querySelector("#tdSut"),tfSum:document.querySelector("#tfSum"),tfSut:document.querySelector("#tfSut")},this.bindDom=function(){this.bindDom_init()},this.getSaleid=function(t){this.getSaleid_init(t)},this.getData=function(t,e,o){this.getData_init(t,e,o)}},bindDom_init:function(){this.config.AddAgency.innerHTML=this.AddAgency,this.config.StepProperty.innerHTML=this.StepProperty,this.config.ReportCustomer.innerHTML=this.ReportCustomer,this.config.CustomerLook.innerHTML=this.CustomerLook,this.config.lfScale.innerHTML=this.lfScale,this.config.TotalSales.innerHTML=this.TotalSales,this.config.TotalHouse.innerHTML=this.TotalHouse,this.config.qySum.innerHTML=this.qySum,this.config.qySut.innerHTML=this.qySut,this.config.cjScale.innerHTML=this.cjScale,this.config.AgencyPayMoney.innerHTML=this.AgencyPayMoney,this.config.AgencyPay.innerHTML=this.AgencyPay,this.config.tdSum.innerHTML=this.tdSum,this.config.tdSut.innerHTML=this.tdSut,this.config.tfSum.innerHTML=this.tfSum,this.config.tfSut.innerHTML=this.tfSut},getSaleid_init:function(t){if(-1==t.location.href.indexOf("placeuserid"))return $my.messageInfo.html("url错误").fadeIn("fast").delay("1000").fadeOut("slow"),!1;var e=t.location.search;e=e.split("=")[1],$my.placeuserid=e},getData_init:function(t,e,o){if(null==t||"null"==t)return $my.messageInfo.html("楼盘参数丢失").fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/placeusercontroller/placeApp.json",data:{propertyId:t,countType:e,placeUserID:o},success:function(t){if("{}"===JSON.stringify(t))return void $my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow");var e=t.resultList;if(!e.length)return void $my.messageInfo.html("数据为空").stop().fadeIn("fast").delay("1000").fadeOut("slow");var o=e[0];reportDetail.AddAgency=o.AddAgency,reportDetail.StepProperty=o.StepProperty,reportDetail.ReportCustomer=o.ReportCustomer,reportDetail.CustomerLook=o.CustomerLook,reportDetail.TotalSales=(o.TotalSales/1e4).toFixed(4),reportDetail.TotalHouse=o.TotalHouse,reportDetail.AgencyPayMoney=(o.AgencyPayMoney/1e4).toFixed(4),reportDetail.AgencyPay=o.AgencyPay,reportDetail.bindDom()}})},throttle:function(t,e){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)},buffer:function(){var t=this.dataset.index;if("0"===t||"6"===t)return $my.messageInfo.html("今日/自定暂停查询").fadeIn("fast").delay("1000").fadeOut("slow"),!1;reportDetail.getData($my.propertyid,t,$my.placeuserid)}},e.fn.init.prototype=e.fn,e}(),reportDetail=ReportDetail();$(function(){window.$my={messageInfo:$(".messageInfo"),propertyid:sessionStorage.getItem("propertyID")},$.ajaxSetup({type:"POST",dataType:"json",error:function(){$my.messageInfo.html("服务错误").fadeIn("fast").delay("1000").fadeOut("slow")}}),reportDetail.getSaleid(window),reportDetail.getData($my.propertyid,1,$my.placeuserid);var t=document.querySelector("#countType"),e=t.querySelectorAll("li");Array.prototype.forEach.call(e,function(t){t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),$(this).addClass("optionListActive").siblings("li").removeClass("optionListActive"),reportDetail.throttle(reportDetail.buffer,this)},!1)})});