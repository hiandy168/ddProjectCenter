function Chart(){this.domid="",this.timeList=[],this.nameInfo="",this.chartData=[],this.lineColor="",this.series=[]}function AddTrend(){this.baobeiNumArr=[],this.laifangNumArr=[],this.chengjiaoNumArr=[],this.NewZsNumArr=[],this.timeListArr=[],this.baobeiNum="",this.laifangNum="",this.chengjiaoNum="",this.NewZsNum="",this.config={baobeiNum:document.getElementById("baobeiNum"),laifangNum:document.getElementById("laifangNum"),chengjiaoNum:document.getElementById("chengjiaoNum"),NewZsNum:document.getElementById("NewZsNum")}}Chart.prototype={constructor:Chart,chartFn:function(){Highcharts.chart(this.domid,{title:{text:"",x:-20},chart:{backgroundColor:"#49484e",type:"line",marginLeft:40,spacingBottom:0},plotOptions:{series:{marker:{cursor:"pointer",radius:1}}},credits:{enabled:!1},exporting:{enabled:!1},xAxis:{tickWidth:0,gridLineWidth:1,gridLineColor:"#58575d",lineColor:"#58575d",endOnTick:!0,showLastLabel:!0,startOnTick:!0,tickmarkPlacement:"on",categories:this.timeList},yAxis:{title:{text:""},gridLineWidth:1,gridLineColor:"#58575d"},tooltip:{valueSuffix:"套",shared:!0},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0,floating:!1,margin:0,padding:0,width:30,symbolWidth:5,symbolPadding:1,itemStyle:{fontSize:"12px",color:this.lineColor,fontWeight:"normal"},y:-20},series:this.series})}};var bblfChart=new Chart,cjzsChart=new Chart,newZsChart=new Chart;AddTrend.prototype={constructor:AddTrend,throttle:function(t,e){clearTimeout(t.tId),t.tId=setTimeout(function(){t.call(e)},500)},calcTotal:function(t){if("[object Array]"===toString.call(t)){for(var e=0,i=0;i<t.length;i++)e+=t[i];return e}return $my.messageInfo.html("参数错误").stop().fadeIn("fast").delay("1000").fadeOut("slow"),!1},getData:function(t,e){if(null==t||"null"==t)return $my.messageInfo.html("楼盘参数丢失").stop().fadeIn("fast").delay("1000").fadeOut("slow"),!1;$.ajax({url:getRoothPath+"/overview/addTrendApp.json",data:{PropertyID:t,timeselete:e},success:function(t){return"{}"===JSON.stringify(t)?($my.messageInfo.html("暂无数据").stop().fadeIn("fast").delay("1000").fadeOut("slow"),!1):0==t.timelist?($my.messageInfo.html("数据为空").stop().fadeIn("fast").delay("1000").fadeOut("slow"),!1):(addTrend.baobeiNumArr=t.baobeilist,addTrend.laifangNumArr=t.daikanilist,addTrend.chengjiaoNumArr=t.chengjiaolist,addTrend.NewZsNumArr=t.xingzengqdlist,addTrend.timeListArr=t.timelist,addTrend.chartFn(),addTrend.baobeiNum=addTrend.calcTotal(t.baobeilist),addTrend.laifangNum=addTrend.calcTotal(t.daikanilist),addTrend.chengjiaoNum=addTrend.calcTotal(t.chengjiaolist),addTrend.NewZsNum=addTrend.calcTotal(t.xingzengqdlist),addTrend.bindDom(),void 0)}})},chartFn:function(){bblfChart.domid="bblfChart",bblfChart.timeList=this.timeListArr,bblfChart.lineColor="#fff",bblfChart.series=[{name:"报备量",type:"spline",color:"#42C29D",lineWidth:3,data:this.baobeiNumArr},{name:"来访量",type:"spline",color:"#fff",lineWidth:3,data:this.laifangNumArr}],bblfChart.chartFn(),cjzsChart.domid="cjzsChart",cjzsChart.timeList=this.timeListArr,cjzsChart.nameInfo="成交",cjzsChart.chartData=this.chengjiaoNumArr,cjzsChart.lineColor="#3BAFC1",cjzsChart.series=[{name:cjzsChart.nameInfo,type:"spline",color:cjzsChart.lineColor,lineWidth:3,data:cjzsChart.chartData}],cjzsChart.chartFn(),newZsChart.domid="newZsChart",newZsChart.timeList=this.timeListArr,newZsChart.nameInfo="新渠道",newZsChart.chartData=this.NewZsNumArr,newZsChart.lineColor="#F2AD2E",newZsChart.series=[{name:newZsChart.nameInfo,type:"spline",color:newZsChart.lineColor,lineWidth:3,data:newZsChart.chartData}],newZsChart.chartFn(),this.baobeiNumArr=null,this.laifangNumArr=null,this.chengjiaoNumArr=null,this.NewZsNumArr=null,this.timeListArr=null},bindDom:function(){this.config.baobeiNum.innerHTML=this.baobeiNum,this.config.laifangNum.innerHTML=this.laifangNum,this.config.chengjiaoNum.innerHTML=this.chengjiaoNum,this.config.NewZsNum.innerHTML=this.NewZsNum},bindEvent:function(){var t=this.dataset.info;addTrend.getData($my.propertyid,t)}};var addTrend=new AddTrend;$(function(){window.$my={messageInfo:$(".messageInfo"),propertyid:sessionStorage.getItem("propertyID")},$.ajaxSetup({type:"POST",dataType:"json",error:function(){$my.messageInfo.html("服务错误").fadeIn("fast").delay("1000").fadeOut("slow")}}),addTrend.getData($my.propertyid,2);var t=document.querySelectorAll("div[data-info]");Array.prototype.forEach.call(t,function(t){t.addEventListener("click",function(t){t.preventDefault(),t.stopPropagation(),$(this).addClass("optionListActive").siblings("div").removeClass("optionListActive"),addTrend.throttle(addTrend.bindEvent,this)},!1)})});